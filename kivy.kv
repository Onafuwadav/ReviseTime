#:import RippleTransition kivy.garden.moretransitions.RippleTransition
#:import PixelTransition kivy.garden.moretransitions.PixelTransition
#:import BlurTransition kivy.garden.moretransitions.BlurTransition
#:import RVBTransition kivy.garden.moretransitions.RVBTransition

<Screen_Manager>:
    id: screen_manager
    StartScreen:
        id: 'start_screen'
        name: 'start'
        manager: 'screen_manager'
    MainMenu:
        id: 'main_menu'
        name: 'menu'
        manager: 'screen_manager'
    WeeklyTimetable:
        id: 'week'
        name: 'weeklyTimetable'
        manager: 'screen_manager'
    Settings_Screen:
        id: 'settings_screen'
        name: 'settings'
        manager: 'screen_manager'
    Timers:
        id: 'timer_screen'
        name: 'Timer_screen'
        manager: 'screen_manager'
    TestDates:
        id: 'input_test_dates'
        name: 'testDates'
        manager: 'screen_manager'

<Settings_Screen>:
    RelativeLayout:
        canvas.before:
            Color:
                rgba: 223/255, 103/255, 140/255, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Spinner:
            id: Spinner
            size_hint: [0.1, 0.05]
            pos_hint: {'left': 1, 'top': 1}
            text: 'Settings'
            values: ['Main Menu', 'Timer', 'Weekly Timetable', 'Input Test Dates']
            on_text:
                if Spinner.text == 'Main Menu': \
                app.root.current = 'menu'
                if Spinner.text == 'Timer': \
                app.root.current = 'Timer_screen'
                if Spinner.text == 'Weekly Timetable': \
                app.root.current = 'weeklyTimetable'
                if Spinner.text == 'Input Test Dates': \
                app.root.current = 'testDates'


<Timers>:
    RelativeLayout:
        canvas.before:
            Color:
                rgba: 223/255, 103/255, 140/255, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Spinner:
            id: Spinner
            size_hint: [0.1, 0.05]
            pos_hint: {'left': 1, 'top': 1}
            text: 'Timer'
            values: ['Main Menu','Settings', 'Weekly Timetable', 'Input Test Dates']
            on_text:
                if Spinner.text == 'Main Menu': \
                app.root.current = 'menu'
                if Spinner.text == 'Settings': \
                app.root.current = 'settings'
                if Spinner.text == 'Weekly Timetable': \
                app.root.current = 'weeklyTimetable'
                if Spinner.text == 'Input Test Dates': \
                app.root.current = 'testDates'
    BoxLayout:
        orientation: 'vertical'

        Label:
            id: time
            text: '[b]00[/b]:00:00'
        BoxLayout:
            height: 90
            orientation: 'horizontal'
            padding: 20
            spacing: 20
            size_hint: (1, 0)

            Button:
                id: start_stop
                text: 'Start'
                on_press: self.start_stop()

            Button:
                id: reset
                text: 'Reset'
                on_press: self.reset()
        Label:
            id: stopwatch
            text: '00:00.[size=40]00[/size]'

<TestDates>:
    RelativeLayout:
        canvas.before:
            Color:
                rgba: 223/255, 103/255, 140/255, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Spinner:
            id: Spinner
            size_hint: [0.1, 0.05]
            pos_hint: {'left': 1, 'top': 1}
            text: 'Input Test Dates'
            values: ['Main Menu','Settings', 'Timer', 'Weekly Timetable']
            on_text:
                if Spinner.text == 'Main Menu': \
                app.root.current = 'menu'
                if Spinner.text == 'Settings': \
                app.root.current = 'settings'
                if Spinner.text == 'Timer': \
                app.root.current = 'Timer_screen'
                if Spinner.text == 'Weekly Timetable': \
                app.root.current = 'weeklyTimetable'

<MainMenu>:
    on_enter: self.datatable()
    RelativeLayout:
        canvas.before:
            Color:
                rgba: 223/255, 103/255, 140/255, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            id: quote

        Button:
            pos_hint: {'right': 1, 'top': 1}
            size_hint: [0.05, 0.05]
            text: 'To-Do list '

        Spinner:
            id: Spinner
            size_hint: [0.1, 0.05]
            pos_hint: {'left': 1, 'top': 1}
            text: 'Main Menu'
            values: ['Settings', 'Timer', 'Weekly Timetable', 'Input Test Dates']
            on_text:
                if Spinner.text == 'Settings': \
                app.root.current = 'settings'
                if Spinner.text == 'Timer': \
                app.root.current = 'Timer_screen'
                if Spinner.text == 'Weekly Timetable': \
                app.root.current = 'weeklyTimetable'
                if Spinner.text == 'Input Test Dates': \
                app.root.current = 'testDates'

<WeeklyTimetable>:
    on_enter: self.datatable()
    RelativeLayout:
        canvas.before:
            Color:
                rgba: 223/255, 103/255, 140/255, 1
            Rectangle:
                pos: self.pos
                size: self.size
        Spinner:
            id: Spinner
            size_hint: [0.1, 0.05]
            pos_hint: {'left': 1, 'top': 1}
            text: 'Weekly Timetable'
            values: ['Main Menu','Settings', 'Timer', 'Input Test Dates']
            on_text:
                if Spinner.text == 'Main Menu': \
                app.root.current = 'menu'
                if Spinner.text == 'Settings': \
                app.root.current = 'settings'
                if Spinner.text == 'Timer': \
                app.root.current = 'Timer_screen'
                if Spinner.text == 'Input Test Dates': \
                app.root.current = 'testDates'

<StartScreen>:
    orientation: "vertical"
    FloatLayout:
        canvas.before:
            Color:
                rgba: 223/255, 103/255, 140/255, 1
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout:
            pos_hint: {"center_x": 0.5, "center_y": 1}
            size_hint: [1, 0.8]
            canvas.before:
                Color:
                    rgba: 61/255, 21/255, 95/255, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [0, 0, 40, 40]
        BoxLayout:
            size_hint: [0.6, 0.7]
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            MDCard:
                orientation: "vertical"
                BoxLayout:
                    orientation: "vertical"
                    Label:
                        text: "[color=000000]ReviseTime[/color]"
                        markup: True
                        text_size: self.size
                        font_size: 35
                        bold: True
                        halign: 'center'
                        valign: 'middle'
                    AnchorLayout:
                        anchor_x: 'center'
                        anchor_y: 'center'
                        Image:
                            source: 'images/img1.jpg'
                            size_hint: None, None
                    MDTextField:
                        id: email
                        icon_left: "email"
                        hint_text: "E-mail"
                        required: True
                        helper_text_mode: "on_error"
                        helper_text: "Email is required"
                        size_hint_x: 0.8
                        write_tab: False
                        pos_hint: {"center_x": 0.5}
                    MDTextField:
                        id: passwd
                        hint_text: "Password"
                        required: True
                        helper_text_mode: "on_error"
                        helper_text: "Password is required"
                        size_hint_x: 0.8
                        write_tab: False
                        pos_hint: {"center_x": 0.5}
                        password: True
                        on_text_validate:
                            if app.signin(self) == True: \
                            app.root.current = "menu"
                    BoxLayout:
                        orientation: "vertical"
                        MDFillRoundFlatButton:
                            text: "SIGN IN"
                            size_hint_x: 0.8
                            pos_hint: {"center_x": 0.5}
                            on_release:
                                if app.signin(self) == True: \
                                app.root.current = "menu"
                        MDRectangleFlatButton:
                            text: "Don't have an account?"
                            pos_hint: {"center_x": 0.5}
                            on_release: app.signup()


<SignUpScreen>:
    orientation: "vertical"
    spacing: "12dp"
    size_hint_y: None
    height: "250dp"
    MDLabel:
        text: ""
        theme_text_color: "Error"
        halign: "center"
        font_size: 12
        id: error
    MDTextField:
        id: forename
        required: True
        helper_text_mode: "on_error"
        helper_text: "Forename is required"
        write_tab: False
        hint_text: "Forename"

    MDTextField:
        id: email
        required: True
        helper_text_mode: "on_error"
        helper_text: "Email is required"
        write_tab: False
        hint_text: "Email"

    MDTextField:
        id: password
        required: True
        helper_text: "Must be 8 characters"
        write_tab: False
        hint_text: "Password"
        helper_text_mode: "on_focus"

    MDTextField:
        id: password2
        required: True
        helper_text_mode: "on_error"
        helper_text: "Password is required"
        write_tab: False
        hint_text: "Re-enter password"
        password: True
        on_text_validate: app.next_page(self)

<SignUpScreen2>:
    orientation: "vertical"
    spacing: "12dp"
    size_hint_y: None
    height: "400dp"
    MDLabel:
        text: ""
        theme_text_color: "Error"
        halign: "center"
        font_size: 12
        id: error

    MDTextField:
        id: HL1
        required: True
        helper_text_mode: "on_error"
        helper_text: "Enter subject"
        write_tab: False
        hint_text: "Higher Level subject 1"

    MDTextField:
        id: HL2
        required: True
        helper_text_mode: "on_error"
        helper_text: "Enter subject"
        write_tab: False
        hint_text: "Higher Level subject 2"

    MDTextField:
        id: HL3
        required: True
        helper_text_mode: "on_error"
        helper_text: "Enter subject"
        write_tab: False
        hint_text: "Higher Level subject 3"

    MDTextField:
        id: SL1
        required: True
        helper_text_mode: "on_error"
        helper_text: "Enter subject"
        write_tab: False
        hint_text: "Standard Level subject 1"

    MDTextField:
        id: SL2
        required: True
        helper_text_mode: "on_error"
        helper_text: "Enter subject"
        write_tab: False
        hint_text: "Standard Level subject 2"

    MDTextField:
        id: SL3
        required: True
        helper_text_mode: "on_error"
        helper_text: "Enter subject"
        write_tab: False
        hint_text: "Standard Level subject 3"
        on_text_validate: app.create_account(self)